!function(s){function t(o){if(e[o])return e[o].exports;var a=e[o]={exports:{},id:o,loaded:!1};return s[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var e={};return t.m=s,t.c=e,t.p="/public/assets/js/",t(0)}([function(s,t){"use strict";!function(){function s(s){for(var t=0;t<s.length;t++){var o=s[t],a='<div class="book">';a+='<div class="row">',a+='<div class="col-sm-3">',o.image&&"no-image"!==o.image&&(a+='<img src="'+o.image+'" alt="book cover">'),a+="</div>",a+='<div class="col-sm-9 book-details">',a+='<cite class="book-title">'+o.title+"</cite>",a+='<button type="button" class="btn btn-primary btn-xs swap-button">Offer to swap</button>',o.authors&&(a+='<p class="authors">by '+o.authors+"</p>"),a+="<p>"+o.publishedDate+"</p>",o.pages&&(a+="<p>"+o.pages+" pages</p>"),a+="<p>Language: "+o.language+"</p>",a+='<p id="industryIdentifier">'+o.industryIdentifier+"</p>",a+='<span class="offered-book">'+o.owner+","+o.image+",",a+=o.publishedDate+","+o.pages+","+o.language+",",a+=o.industryIdentifier+","+o.timestamp+"</span>",a+='<span id="title">'+o.title+"</span>",a+='<span id="authors">'+o.authors+"</span>",a+="</div>",a+="</div>",a+="</div>",$("#mybooks").append(a)}$(".swap-button").click(function(s){var t=$(s.target);$(t).text("Swap proposal sent"),$(t).css("background-color","green");var o=t.siblings("#title").text(),a=t.siblings("#authors").text(),i=t.siblings(".offered-book").text();i=i.split(",");var r=i[0]+","+i[1]+","+i[2],p=i[3],n=i[4],l=i[5],d=i[6],u=i[7],c=i[8];i={owner:r,image:p,title:o,authors:a,publishedDate:n,pages:l,language:d,industryIdentifier:u,timestamp:c};var g={requestedBook:e,offeredBook:i};console.log("request",g),$.post("http://localhost:3000/request-swap",{swapProposal:{requestedBook:e,offeredBook:i}})})}var t=store.get("user"),e=store.get("book");console.log(e);var o=e.image,a=e.title,i=e.authors,r=e.publishedDate,p=e.pages,n=e.language,l=e.industryIdentifier,d=(e.timestamp,'<div class="book">');d+='<div class="row">',d+='<div class="col-sm-3">',"no-image"!==o&&(d+='<img src="'+o+'">'),d+="</div>",d+='<div class="col-sm-9 book-details">',d+='<p class="book-title">'+a+"</p>",i&&(d+='<p class="authors">by '+i+"</p>"),d+="<p>"+r+"</p>",p&&(d+="<p>"+p+" pages</p>"),d+="<p>Language: "+n+"</p>",d+='<p id="industryIdentifier">'+l+"</p>",d+="</div>",d+="</div>",d+="</div>",console.log(d),$("#requested-book").append(d),$(".close-button").click(function(){window.close()}),$.post("http://localhost:3000/get-my-books",{user:t},s)}()}]);